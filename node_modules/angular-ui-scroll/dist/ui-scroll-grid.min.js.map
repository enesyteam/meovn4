{"version":3,"sources":["webpack:///ui-scroll-grid.min.js","webpack:///webpack/bootstrap 7b7663c4ef0bd85aea15","webpack:///./src/ui-scroll-grid.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","7","angular","directive","console","$timeout","GridAdapter","controller","this","getLayout","applyLayout","layout","columnFromPoint","x","y","getColumns","ColumnAdapter","column","css","attr","arguments","value","length","header","forEachRow","row","id","moveBefore","index","exchangeWith","ColumnController","columns","insidePoint","element","offset","left","outerWidth","top","outerHeight","target","detach","before","moveLast","parent","append","applyCss","removeAttr","mapTo","assign","_this","_this2","result","GridController","scrollViewport","transform","visible","forEach","cell","_this3","rowMap","Map","adapter","publicContext","gridAdapter","scope","item","registerColumn","push","registerCell","set","unregisterCell","indexOf","splice","delete","callback","_this4","slice","sort","a","b","layouts","Error","map","selected","columnId","next","find","col","undefined","require","restrict","link","$scope","$attr","controllers","gridController","tdInitializer","uiScrollTdInitializer","linking","$on","onLink"],"mappings":";;;;;;CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA4BAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,SAAAP,EAAAQ,EAAAC,GACAZ,EAAAa,EAAAV,EAAAQ,IACAG,OAAAC,eAAAZ,EAAAQ,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAf,GACA,GAAAQ,GAAAR,KAAAgB,WACA,WAA2B,MAAAhB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDtB,EAAAyB,EAAA,GAGAzB,IAAA0B,EAAA,KDMMC,EACA,SAAUvB,EAAQD,EAASH,GAEjC,YEtEA4B,SAAQxB,OAAO,qBACZyB,UAAU,cAAe,OAAQ,WAAY,SAASC,EAASC,GAE9D,QAASC,GAAYC,GAEnBC,KAAKC,UAAY,iBAAMF,GAAWE,aAElCD,KAAKE,YAAc,SAACC,GAAD,MAAYJ,GAAWG,YAAYC,IAEtDH,KAAKI,gBAAkB,SAACC,EAAGC,GAAJ,MAAUP,GAAWK,gBAAgBC,EAAGC,IAE/D1B,OAAOC,eAAemB,KAAM,WAAahB,IAAK,iBAAMe,GAAWQ,gBAGjE,QAASC,GAAcT,EAAYU,GAEjCT,KAAKU,IAAM,WACT,GAAIC,GAAOC,UAAU,GACjBC,EAAQD,UAAU,EACtB,IAAwB,GAApBA,UAAUE,OACZ,MAAOL,GAAOM,OAAOL,IAAIC,EAEH,IAApBC,UAAUE,SACZL,EAAOM,OAAOL,IAAIC,EAAME,GACxBd,EAAWiB,WAAW,SAACC,GAAD,MAASA,GAAIR,EAAOS,IAAIR,IAAIC,EAAME,KACxDJ,EAAOC,IAAIC,GAAQE,IAIvBb,KAAKmB,WAAa,SAACC,GAAD,MAAWrB,GAAWoB,WAAWV,EAAQW,IAE3DpB,KAAKqB,aAAe,SAACD,GAAD,MAAWrB,GAAWsB,aAAaZ,EAAQW,IAE/DxC,OAAOC,eAAemB,KAAM,YAAchB,IAAK,iBAAMyB,GAAOS,MAG9D,QAASI,GAAiBvB,EAAYwB,EAASR,GA0C7C,QAASS,GAAYC,EAASpB,EAAGC,GAC/B,GAAIoB,GAASD,EAAQC,QACrB,SAAIrB,EAAIqB,EAAOC,MAAQD,EAAOC,KAAOF,EAAQG,YAAW,GAAQvB,MAE5DC,EAAIoB,EAAOG,KAAOH,EAAOG,IAAMJ,EAAQK,aAAY,GAAQxB,GAKjE,QAASa,GAAWM,EAASM,GAC3BN,EAAQO,SACRD,EAAOE,OAAOR,GAGhB,QAASS,GAAST,GAChB,GAAIU,GAASV,EAAQU,QACrBV,GAAQO,SACRG,EAAOC,OAAOX,GAGhB,QAASY,GAASN,EAAQrB,GACxBqB,EAAOO,WAAW,QAClB,KAAK,GAAI3B,KAAQD,GACXA,EAAIpB,eAAeqB,IACrBoB,EAAOrB,IAAIC,EAAMD,EAAIC,IAhE3BX,KAAKe,OAASA,EACdf,KAAKU,OACLV,KAAKuC,MAAQhB,EAAQT,OACrBd,KAAKkB,GAAKK,EAAQT,OAIlBd,KAAKE,YAAc,SAASC,GAC1BH,KAAKU,IAAM9B,OAAO4D,UAAWrC,EAAOO,KACpCV,KAAKuC,MAAQpC,EAAOoC,MACpBF,EAASrC,KAAKe,OAAQf,KAAKU,MAG7BV,KAAKmB,WAAa,SAASY,GAAQ,GAAAU,GAAAzC,IAC7B+B,IACFZ,EAAWJ,EAAQgB,EAAOhB,QAC1BhB,EAAWiB,WAAW,SAACC,GAAD,MAASE,GAAWF,EAAIwB,EAAKvB,IAAKD,EAAIc,EAAOb,SAEnEgB,EAASnB,GACThB,EAAWiB,WAAW,SAACC,GAAD,MAASiB,GAASjB,EAAIwB,EAAKvB,SAIrDlB,KAAKI,gBAAkB,SAASC,EAAGC,GAAG,GAAAoC,GAAA1C,IACpC,IAAIwB,EAAYT,EAAQV,EAAGC,GACzB,MAAON,KAET,IAAI2C,GAAS,IAIb,OAHA5C,GAAWiB,WAAW,SAACC,GAAD,MACpB0B,GAASnB,EAAYP,EAAIyB,EAAKxB,IAAKb,EAAGC,GAA7BoC,EAAyCC,IAE7CA,GAGT3C,KAAKqC,SAAW,SAASN,GACvBM,EAASN,EAAQ/B,KAAKU,MAoC1B,QAASkC,GAAeC,GAyGtB,QAASC,GAAU7B,GACjB,GAAIkB,GAASlB,EAAI,GAAGkB,SAChBY,IAEJ9B,GAAI+B,QAAQ,SAACC,EAAM7B,GACjBG,EAAQH,GAAOiB,SAASY,GACxBF,EAAQxB,EAAQH,GAAOmB,OAAStB,EAAIG,GACpCH,EAAIG,GAAOY,WAGbe,EAAQC,QAAQ,SAAAC,GAAA,MAAQd,GAAOC,OAAOa,KAnHF,GAAAC,GAAAlD,KAClCuB,KACA4B,EAAS,GAAIC,IAEjBvD,GAAS,WACPgD,EAAeQ,QAAQC,cAAcC,YAAc,GAAIzD,GAAJoD,GACnDL,EAAeQ,QAAQP,UAAY,SAACU,EAAOC,GAAR,MAAiBX,GAAUK,EAAOnE,IAAIwE,OAG3ExD,KAAK0D,eAAiB,SAAS3C,GAC7BQ,EAAQoC,KAAK,GAAIrC,GAAiBtB,KAAMuB,EAASR,KAGnDf,KAAK4D,aAAe,SAASJ,EAAOP,GAClC,GAAIhC,GAAMkC,EAAOnE,IAAIwE,EAKrB,OAJKvC,KACHA,KACAkC,EAAOU,IAAIL,EAAOvC,MAEhBA,EAAIH,QAAUS,EAAQT,UAG1BG,EAAI0C,KAAKV,IACF,IAGTjD,KAAK8D,eAAiB,SAASN,EAAOP,GACpC,GAAIhC,GAAMkC,EAAOnE,IAAIwE,GACjBrF,EAAI8C,EAAI8C,QAAQd,EACpBhC,GAAI+C,OAAO7F,EAAG,GACT8C,EAAIH,QACPqC,EAAOc,OAAOT,IAIlBxD,KAAKgB,WAAa,SAASkD,GACzBf,EAAOH,QAAQkB,IAGjBlE,KAAKO,WAAa,WAAW,GAAA4D,GAAAnE,KACvB2C,IAIJ,OAHApB,GAAQ6C,QACLC,KAAK,SAACC,EAAGC,GAAJ,MAAUD,GAAE/B,MAAQgC,EAAEhC,QAC3BS,QAAQ,SAACvC,GAAD,MAAYkC,GAAOgB,KAAK,GAAInD,GAAJ2D,EAAwB1D,MACpDkC,GAGT3C,KAAKC,UAAY,WACf,GAAI0C,KAMJ,OALApB,GAAQyB,QAAQ,SAACvC,EAAQW,GAAT,MAAmBuB,GAAOgB,MACxCvC,MAAOA,EACPV,IAAK9B,OAAO4D,UAAW/B,EAAOC,KAC9B6B,MAAO9B,EAAO8B,UAETI,GAGT3C,KAAKE,YAAc,SAASsE,GAC1B,IAAKA,GAAWA,EAAQ1D,QAAUS,EAAQT,OACxC,KAAM,IAAI2D,OAAM,4EAElBD,GAAQxB,QAAQ,SAAC7C,EAAQiB,GAAT,MAAmBG,GAAQH,GAAOlB,YAAYC,KAC9D2C,EAAUvB,EAAQmD,IAAI,SAACjE,GAAD,MAAYA,GAAOM,UACzCoC,EAAOH,QAAQ,SAAC/B,GAAD,MAAS6B,GAAU7B,MAGpCjB,KAAKmB,WAAa,SAASwD,EAAU5C,GACnC,GAAIX,GAAQW,CAKZ,IAHIA,EAAS,GAAM,IACjBX,EAAQW,EAASR,EAAQQ,EAAO6C,UAAUrC,MAAQhB,EAAQT,UAExDM,EAAQ,GAAKA,EAAQG,EAAQT,QAAjC,CAIA,GAAIyB,GAAQoC,EAASpC,MACnBsC,EAAO,IACTzD,IAASmB,EAAQnB,EAAQ,EAAI,EAE7BG,EAAQyB,QAAQ,SAAAzE,GACdA,EAAEgE,OAAShE,EAAEgE,MAAQA,EAAQ,EAAI,EACjChE,EAAEgE,OAAShE,EAAEgE,OAASnB,EAAQ,EAAI,EAClCyD,EAAOtG,EAAEgE,QAAUnB,EAAQ,EAAI7C,EAAIsG,IAGrCF,EAASpC,MAAQnB,EACjBuD,EAASxD,WAAW0D,KAGtB7E,KAAKqB,aAAe,SAASsD,EAAUvD,GACjCA,EAAQ,GAAKA,GAASG,EAAQT,SAGlCS,EAAQuD,KAAK,SAAAvG,GAAA,MAAKA,GAAEgE,QAAUnB,IAAOmB,MAAQoC,EAASpC,MACtDoC,EAASpC,MAAQnB,IAGnBpB,KAAKI,gBAAkB,SAASC,EAAGC,GACjC,GAAIG,GAASc,EAAQuD,KAAK,SAAAC,GAAA,MAAOA,GAAI3E,gBAAgBC,EAAGC,IACxD,OAAOG,GAAS,GAAID,GAAcR,KAAMS,OAAUuE,IAoBtD,OACEC,SAAU,sBACVC,SAAU,IACVC,KAAM,SAACC,EAAQ3D,EAAS4D,EAAOC,GAC7BA,EAAY,GAAGC,eAAiBD,EAAY,GAAGC,gBAAkB,GAAI3C,GAAe0C,EAAY,IAChGA,EAAY,GAAGC,eAAe7B,eAAejC,QAKpD9B,UAAU,aAAc,WACvB,OACEsF,SAAU,uBACVC,SAAU,IACVC,KAAM,SAACC,EAAQ3D,EAAS4D,EAAOC,GAC7B,GAAKA,EAAY,GAAjB,CAGA,GAAI9B,GAAQ4B,EACRI,EAAgBJ,EAAOK,qBACtBD,KACHA,EAAgBJ,EAAOK,uBACrBC,SAAS,IAGRF,EAAcE,UACjBlC,EAAQgC,EAAchC,MAExB,IAAI+B,GAAiBD,EAAY,GAAGC,cAChCA,GAAe3B,aAAaJ,EAAO/B,IACrC2D,EAAOO,IAAI,WAAY,iBAAMJ,GAAezB,eAAeN,EAAO/B,KAE/D+D,EAAcE,SACjBF,EAAcI","file":"ui-scroll-grid.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 7:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nangular.module('ui.scroll.grid', []).directive('uiScrollTh', ['$log', '$timeout', function (console, $timeout) {\n\n  function GridAdapter(controller) {\n\n    this.getLayout = function () {\n      return controller.getLayout();\n    };\n\n    this.applyLayout = function (layout) {\n      return controller.applyLayout(layout);\n    };\n\n    this.columnFromPoint = function (x, y) {\n      return controller.columnFromPoint(x, y);\n    };\n\n    Object.defineProperty(this, 'columns', { get: function get() {\n        return controller.getColumns();\n      } });\n  }\n\n  function ColumnAdapter(controller, column) {\n\n    this.css = function () /* attr, value */{\n      var attr = arguments[0];\n      var value = arguments[1];\n      if (arguments.length == 1) {\n        return column.header.css(attr);\n      }\n      if (arguments.length == 2) {\n        column.header.css(attr, value);\n        controller.forEachRow(function (row) {\n          return row[column.id].css(attr, value);\n        });\n        column.css[attr] = value;\n      }\n    };\n\n    this.moveBefore = function (index) {\n      return controller.moveBefore(column, index);\n    };\n\n    this.exchangeWith = function (index) {\n      return controller.exchangeWith(column, index);\n    };\n\n    Object.defineProperty(this, 'columnId', { get: function get() {\n        return column.id;\n      } });\n  }\n\n  function ColumnController(controller, columns, header) {\n\n    this.header = header;\n    this.css = {};\n    this.mapTo = columns.length;\n    this.id = columns.length;\n\n    // controller api methods\n\n    this.applyLayout = function (layout) {\n      this.css = Object.assign({}, layout.css);\n      this.mapTo = layout.mapTo;\n      applyCss(this.header, this.css);\n    };\n\n    this.moveBefore = function (target) {\n      var _this = this;\n\n      if (target) {\n        moveBefore(header, target.header);\n        controller.forEachRow(function (row) {\n          return moveBefore(row[_this.id], row[target.id]);\n        });\n      } else {\n        moveLast(header);\n        controller.forEachRow(function (row) {\n          return moveLast(row[_this.id]);\n        });\n      }\n    };\n\n    this.columnFromPoint = function (x, y) {\n      var _this2 = this;\n\n      if (insidePoint(header, x, y)) {\n        return this;\n      }\n      var result = null;\n      controller.forEachRow(function (row) {\n        return result = insidePoint(row[_this2.id], x, y) ? _this2 : result;\n      });\n      return result;\n    };\n\n    this.applyCss = function (target) {\n      applyCss(target, this.css);\n    };\n\n    // function definitions\n\n    function insidePoint(element, x, y) {\n      var offset = element.offset();\n      if (x < offset.left || offset.left + element.outerWidth(true) < x) return false;\n      if (y < offset.top || offset.top + element.outerHeight(true) < y) return false;\n      return true;\n    }\n\n    function moveBefore(element, target) {\n      element.detach();\n      target.before(element);\n    }\n\n    function moveLast(element) {\n      var parent = element.parent();\n      element.detach();\n      parent.append(element);\n    }\n\n    function applyCss(target, css) {\n      target.removeAttr('style');\n      for (var attr in css) {\n        if (css.hasOwnProperty(attr)) {\n          target.css(attr, css[attr]);\n        }\n      }\n    }\n  }\n\n  function GridController(scrollViewport) {\n    var _this3 = this;\n\n    var columns = [];\n    var rowMap = new Map();\n\n    $timeout(function () {\n      scrollViewport.adapter.publicContext.gridAdapter = new GridAdapter(_this3);\n      scrollViewport.adapter.transform = function (scope, item) {\n        return transform(rowMap.get(scope), item);\n      };\n    });\n\n    this.registerColumn = function (header) {\n      columns.push(new ColumnController(this, columns, header));\n    };\n\n    this.registerCell = function (scope, cell) {\n      var row = rowMap.get(scope);\n      if (!row) {\n        row = [];\n        rowMap.set(scope, row);\n      }\n      if (row.length >= columns.length) {\n        return false;\n      }\n      row.push(cell);\n      return true;\n    };\n\n    this.unregisterCell = function (scope, cell) {\n      var row = rowMap.get(scope);\n      var i = row.indexOf(cell);\n      row.splice(i, 1);\n      if (!row.length) {\n        rowMap.delete(scope);\n      }\n    };\n\n    this.forEachRow = function (callback) {\n      rowMap.forEach(callback);\n    };\n\n    this.getColumns = function () {\n      var _this4 = this;\n\n      var result = [];\n      columns.slice().sort(function (a, b) {\n        return a.mapTo - b.mapTo;\n      }).forEach(function (column) {\n        return result.push(new ColumnAdapter(_this4, column));\n      });\n      return result;\n    };\n\n    this.getLayout = function () {\n      var result = [];\n      columns.forEach(function (column, index) {\n        return result.push({\n          index: index,\n          css: Object.assign({}, column.css),\n          mapTo: column.mapTo\n        });\n      });\n      return result;\n    };\n\n    this.applyLayout = function (layouts) {\n      if (!layouts || layouts.length != columns.length) {\n        throw new Error('Failed to apply layout - number of layouts should match number of columns');\n      }\n      layouts.forEach(function (layout, index) {\n        return columns[index].applyLayout(layout);\n      });\n      transform(columns.map(function (column) {\n        return column.header;\n      }));\n      rowMap.forEach(function (row) {\n        return transform(row);\n      });\n    };\n\n    this.moveBefore = function (selected, target) {\n      var index = target;\n\n      if (target % 1 !== 0) {\n        index = target ? columns[target.columnId].mapTo : columns.length;\n      }\n      if (index < 0 || index > columns.length) {\n        return; // throw an error?\n      }\n\n      var mapTo = selected.mapTo,\n          next = null;\n      index -= mapTo < index ? 1 : 0;\n\n      columns.forEach(function (c) {\n        c.mapTo -= c.mapTo > mapTo ? 1 : 0;\n        c.mapTo += c.mapTo >= index ? 1 : 0;\n        next = c.mapTo === index + 1 ? c : next;\n      });\n\n      selected.mapTo = index;\n      selected.moveBefore(next);\n    };\n\n    this.exchangeWith = function (selected, index) {\n      if (index < 0 || index >= columns.length) {\n        return;\n      }\n      columns.find(function (c) {\n        return c.mapTo === index;\n      }).mapTo = selected.mapTo;\n      selected.mapTo = index;\n    };\n\n    this.columnFromPoint = function (x, y) {\n      var column = columns.find(function (col) {\n        return col.columnFromPoint(x, y);\n      });\n      return column ? new ColumnAdapter(this, column) : undefined;\n    };\n\n    // function definitions\n\n    function transform(row) {\n      var parent = row[0].parent();\n      var visible = [];\n\n      row.forEach(function (cell, index) {\n        columns[index].applyCss(cell);\n        visible[columns[index].mapTo] = row[index];\n        row[index].detach();\n      });\n\n      visible.forEach(function (cell) {\n        return parent.append(cell);\n      });\n    }\n  }\n\n  return {\n    require: ['^^uiScrollViewport'],\n    restrict: 'A',\n    link: function link($scope, element, $attr, controllers) {\n      controllers[0].gridController = controllers[0].gridController || new GridController(controllers[0]);\n      controllers[0].gridController.registerColumn(element);\n    }\n  };\n}]).directive('uiScrollTd', function () {\n  return {\n    require: ['?^^uiScrollViewport'],\n    restrict: 'A',\n    link: function link($scope, element, $attr, controllers) {\n      if (!controllers[0]) {\n        return;\n      }\n      var scope = $scope;\n      var tdInitializer = $scope.uiScrollTdInitializer;\n      if (!tdInitializer) {\n        tdInitializer = $scope.uiScrollTdInitializer = {\n          linking: true\n        };\n      }\n      if (!tdInitializer.linking) {\n        scope = tdInitializer.scope;\n      }\n      var gridController = controllers[0].gridController;\n      if (gridController.registerCell(scope, element)) {\n        $scope.$on('$destroy', function () {\n          return gridController.unregisterCell(scope, element);\n        });\n      }\n      if (!tdInitializer.linking) {\n        tdInitializer.onLink();\n      }\n    }\n  };\n});\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// ui-scroll-grid.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7b7663c4ef0bd85aea15","angular.module('ui.scroll.grid', [])\r\n  .directive('uiScrollTh', ['$log', '$timeout', function(console, $timeout) {\r\n\r\n    function GridAdapter(controller) {\r\n\r\n      this.getLayout = () => controller.getLayout();\r\n\r\n      this.applyLayout = (layout) => controller.applyLayout(layout);\r\n\r\n      this.columnFromPoint = (x, y) => controller.columnFromPoint(x, y);\r\n\r\n      Object.defineProperty(this, 'columns', { get: () => controller.getColumns() });\r\n    }\r\n\r\n    function ColumnAdapter(controller, column) {\r\n\r\n      this.css = function( /* attr, value */ ) {\r\n        var attr = arguments[0];\r\n        var value = arguments[1];\r\n        if (arguments.length == 1) {\r\n          return column.header.css(attr);\r\n        }\r\n        if (arguments.length == 2) {\r\n          column.header.css(attr, value);\r\n          controller.forEachRow((row) => row[column.id].css(attr, value));\r\n          column.css[attr] = value;\r\n        }\r\n      };\r\n\r\n      this.moveBefore = (index) => controller.moveBefore(column, index);\r\n\r\n      this.exchangeWith = (index) => controller.exchangeWith(column, index);\r\n\r\n      Object.defineProperty(this, 'columnId', { get: () => column.id });\r\n    }\r\n\r\n    function ColumnController(controller, columns, header) {\r\n\r\n      this.header = header;\r\n      this.css = {};\r\n      this.mapTo = columns.length;\r\n      this.id = columns.length;\r\n\r\n      // controller api methods\r\n\r\n      this.applyLayout = function(layout) {\r\n        this.css = Object.assign({}, layout.css);\r\n        this.mapTo = layout.mapTo;\r\n        applyCss(this.header, this.css);\r\n      };\r\n\r\n      this.moveBefore = function(target) {\r\n        if (target) {\r\n          moveBefore(header, target.header);\r\n          controller.forEachRow((row) => moveBefore(row[this.id], row[target.id]));\r\n        } else {\r\n          moveLast(header);\r\n          controller.forEachRow((row) => moveLast(row[this.id]));\r\n        }\r\n      };\r\n\r\n      this.columnFromPoint = function(x, y) {\r\n        if (insidePoint(header, x, y)) {\r\n          return this;\r\n        }\r\n        let result = null;\r\n        controller.forEachRow((row) =>\r\n          result = insidePoint(row[this.id], x, y) ? this : result\r\n        );\r\n        return result;\r\n      };\r\n\r\n      this.applyCss = function(target) {\r\n        applyCss(target, this.css);\r\n      };\r\n\r\n      // function definitions\r\n\r\n      function insidePoint(element, x, y) {\r\n        let offset = element.offset();\r\n        if (x < offset.left || offset.left + element.outerWidth(true) < x)\r\n          return false;\r\n        if (y < offset.top || offset.top + element.outerHeight(true) < y)\r\n          return false;\r\n        return true;\r\n      }\r\n\r\n      function moveBefore(element, target) {\r\n        element.detach();\r\n        target.before(element);\r\n      }\r\n\r\n      function moveLast(element) {\r\n        let parent = element.parent();\r\n        element.detach();\r\n        parent.append(element);\r\n      }\r\n\r\n      function applyCss(target, css) {\r\n        target.removeAttr('style');\r\n        for (let attr in css) {\r\n          if (css.hasOwnProperty(attr)) {\r\n            target.css(attr, css[attr]);\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    function GridController(scrollViewport) {\r\n      let columns = [];\r\n      let rowMap = new Map();\r\n\r\n      $timeout(() => {\r\n        scrollViewport.adapter.publicContext.gridAdapter = new GridAdapter(this);\r\n        scrollViewport.adapter.transform = (scope, item) => transform(rowMap.get(scope), item);\r\n      });\r\n\r\n      this.registerColumn = function(header) {\r\n        columns.push(new ColumnController(this, columns, header));\r\n      };\r\n\r\n      this.registerCell = function(scope, cell) {\r\n        let row = rowMap.get(scope);\r\n        if (!row) {\r\n          row = [];\r\n          rowMap.set(scope, row);\r\n        }\r\n        if (row.length >= columns.length) {\r\n          return false;\r\n        }\r\n        row.push(cell);\r\n        return true;\r\n      };\r\n\r\n      this.unregisterCell = function(scope, cell) {\r\n        let row = rowMap.get(scope);\r\n        let i = row.indexOf(cell);\r\n        row.splice(i, 1);\r\n        if (!row.length) {\r\n          rowMap.delete(scope);\r\n        }\r\n      };\r\n\r\n      this.forEachRow = function(callback) {\r\n        rowMap.forEach(callback);\r\n      };\r\n\r\n      this.getColumns = function() {\r\n        let result = [];\r\n        columns.slice()\r\n          .sort((a, b) => a.mapTo - b.mapTo)\r\n          .forEach((column) => result.push(new ColumnAdapter(this, column)));\r\n        return result;\r\n      };\r\n\r\n      this.getLayout = function() {\r\n        let result = [];\r\n        columns.forEach((column, index) => result.push({\r\n          index: index,\r\n          css: Object.assign({}, column.css),\r\n          mapTo: column.mapTo\r\n        }));\r\n        return result;\r\n      };\r\n\r\n      this.applyLayout = function(layouts) {\r\n        if (!layouts || layouts.length != columns.length) {\r\n          throw new Error('Failed to apply layout - number of layouts should match number of columns');\r\n        }\r\n        layouts.forEach((layout, index) => columns[index].applyLayout(layout));\r\n        transform(columns.map((column) => column.header));\r\n        rowMap.forEach((row) => transform(row));\r\n      };\r\n\r\n      this.moveBefore = function(selected, target) {\r\n        let index = target;\r\n\r\n        if (target % 1 !== 0) {\r\n          index = target ? columns[target.columnId].mapTo : columns.length;\r\n        }\r\n        if (index < 0 || index > columns.length) {\r\n          return; // throw an error?\r\n        }\r\n\r\n        let mapTo = selected.mapTo,\r\n          next = null;\r\n        index -= mapTo < index ? 1 : 0;\r\n\r\n        columns.forEach(c => {\r\n          c.mapTo -= c.mapTo > mapTo ? 1 : 0;\r\n          c.mapTo += c.mapTo >= index ? 1 : 0;\r\n          next = c.mapTo === index + 1 ? c : next;\r\n        });\r\n\r\n        selected.mapTo = index;\r\n        selected.moveBefore(next);\r\n      };\r\n\r\n      this.exchangeWith = function(selected, index) {\r\n        if (index < 0 || index >= columns.length) {\r\n          return;\r\n        }\r\n        columns.find(c => c.mapTo === index).mapTo = selected.mapTo;\r\n        selected.mapTo = index;\r\n      };\r\n\r\n      this.columnFromPoint = function(x, y) {\r\n        let column = columns.find(col => col.columnFromPoint(x, y));\r\n        return column ? new ColumnAdapter(this, column) : undefined;\r\n      };\r\n\r\n      // function definitions\r\n\r\n      function transform(row) {\r\n        let parent = row[0].parent();\r\n        let visible = [];\r\n\r\n        row.forEach((cell, index) => {\r\n          columns[index].applyCss(cell);\r\n          visible[columns[index].mapTo] = row[index];\r\n          row[index].detach();\r\n        });\r\n\r\n        visible.forEach(cell => parent.append(cell));\r\n      }\r\n\r\n    }\r\n\r\n    return {\r\n      require: ['^^uiScrollViewport'],\r\n      restrict: 'A',\r\n      link: ($scope, element, $attr, controllers) => {\r\n        controllers[0].gridController = controllers[0].gridController || new GridController(controllers[0]);\r\n        controllers[0].gridController.registerColumn(element);\r\n      }\r\n    };\r\n  }])\r\n\r\n.directive('uiScrollTd', function() {\r\n  return {\r\n    require: ['?^^uiScrollViewport'],\r\n    restrict: 'A',\r\n    link: ($scope, element, $attr, controllers) => {\r\n      if (!controllers[0]) {\r\n        return;\r\n      }\r\n      let scope = $scope;\r\n      let tdInitializer = $scope.uiScrollTdInitializer;\r\n      if (!tdInitializer) {\r\n        tdInitializer = $scope.uiScrollTdInitializer = {\r\n          linking: true\r\n        };\r\n      }\r\n      if (!tdInitializer.linking) {\r\n        scope = tdInitializer.scope;\r\n      }\r\n      let gridController = controllers[0].gridController;\r\n      if (gridController.registerCell(scope, element)) {\r\n        $scope.$on('$destroy', () => gridController.unregisterCell(scope, element));\r\n      }\r\n      if (!tdInitializer.linking) {\r\n        tdInitializer.onLink();\r\n      }\r\n    }\r\n  };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui-scroll-grid.js"],"sourceRoot":""}